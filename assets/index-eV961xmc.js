(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function u(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function c(t){if(t.ep)return;t.ep=!0;const e=u(t);fetch(t.href,e)}})();function p(){const l=document.querySelector(".form"),n=document.querySelector(".form__success"),u=document.querySelector(".form__btn"),c=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,t=/^\+?\d[\d\s\-()]{7,}$/,e=new d("#name","#name-err",{required:!0,min:3}),o=new d("#surname","#surname-err",{required:!0,min:3}),i=new d("#email","#email-err",{required:!0,reg:c}),r=new d("#phone","#phone-err",{required:!0,reg:t});[e,o,i,r].forEach(s=>{s.elem.addEventListener("focus",()=>{s.clearErr()}),s.elem.addEventListener("blur",()=>{s.check()})});function d(s,a,m={}){this.elem=document.querySelector(s),this.elemErr=document.querySelector(a),this.checks=m,this.check=function(){this.checks.required&&!this.elem.value?this.showErr("This field is required"):this.checks.min&&this.elem.value.length<this.checks.min?this.showErr(`Enter at least ${this.checks.min} characters`):this.checks.reg&&!this.checks.reg.test(this.elem.value)?this.showErr("Invalid format"):this.clearErr()},this.showErr=function(h){this.elemErr.textContent=h,this.elemErr.style.display="flex",this.elem.style.borderColor="red"},this.clearErr=function(){this.elemErr.style.display="none",this.elemErr.textContent="",this.elem.style.borderColor="#bcc6d0"}}l.addEventListener("submit",async s=>{if(s.preventDefault(),e.check(),o.check(),i.check(),r.check(),!e.elemErr.textContent&&!o.elemErr.textContent&&!i.elemErr.textContent&&!r.elemErr.textContent){u.setAttribute("disabled","");const a={name:e.elem.value,surname:e.elem.value,email:i.elem.value,phone:r.elem.value},m=await E("/server.php",a);u.removeAttribute("disabled",""),m.success?(f(),y("Form successfully submitted")):y("Form submission error")}});function f(){l.style.display="flex",n.style.display="none",e.elem.value="",o.elem.value="",i.elem.value="",r.elem.value="",[e,o,i,r].forEach(s=>{s.clearErr()})}function y(s){console.log(s),l.style.display="none",n.style.display="flex"}async function E(s,a){return await{...await new Promise(h=>{setTimeout(()=>{h(a)},1e3)}),success:!0}}return{resetForm:f}}const{resetForm:v}=p();function b(l,n,u){const c=document.querySelector(l),t=Array.isArray(n)?n.join(", "):n;document.querySelectorAll(t).forEach(r=>{r.addEventListener("click",()=>{o()})}),c.addEventListener("click",r=>{(r.target===c||r.target.closest(u))&&i()}),document.addEventListener("keydown",r=>{r.code==="Escape"&&c.classList.contains("active")&&i()});function o(){c.classList.add("active"),document.body.style.overflow="hidden"}function i(){c.classList.remove("active"),document.body.style.overflow="",v()}}window.addEventListener("DOMContentLoaded",()=>{b(".subscribe__overlay",[".header__subscribe",".footer__top-link"],".subscribe__close"),p()});
